# Maintainer: Clint Valentine <valentine.clint@gmail.com>

pkgname=bcl2fastq2
pkgver=2.17.1.14
pkgrel=14
pkgdesc="The bcl2fastq2 Conversion Software v2.17 can be used to convert BCL files from all Illumina sequencing systems running RTA version 1.18.54 and above."
arch=('i686' 'x86_64')
url="https://support.illumina.com/downloads/bcl2fastq-conversion-software-v$pkgver.html"
license=('Proprietary')
depends=('gcc-libs')
provides=('bcl2fastq2')
conflicts=('bcl2fastq2')
source=("ftp://webdata2:webdata2@ussd-ftp.illumina.com/downloads/software/bcl2fastq/bcl2fastq2-v$pkgver.tar.zip")
md5sums=('7426226c6db095862e636b95c38608d3')

build() {
  cd $srcdir/

  # Unpack what makepkg unzipped for us.
  tar -xvf $pkgname-v$pkgver.tar.gz

  mkdir -p $srcdir/${pkgname::-1}/$pkgname-build/

  cd $srcdir/${pkgname::-1}/$pkgname-build/
  $srcdir/${pkgname::-1}/src/configure

  make
}

package() {
  cd $srcdir/${pkgname::-1}/$pkgname-build/

  make DESTDIR=$pkgdir install
}
